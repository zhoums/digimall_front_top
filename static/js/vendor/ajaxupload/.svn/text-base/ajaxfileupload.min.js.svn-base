jQuery.extend({handleError:function(e,t,a,n){e.error&&e.error.call(e.context||e,t,a,n),e.global&&(e.context?jQuery(e.context):jQuery.event).trigger("ajaxError",[t,e,n])},createUploadIframe:function(e,t){var a="jUploadFrame"+e,n='<iframe id="'+a+'" name="'+a+'" style="position:absolute; top:-9999px; left:-9999px"';if(window.ActiveXObject)if("9.0"==jQuery.browser.version)r=document.createElement("iframe"),r.id=a,r.name=a;else if("6.0"==jQuery.browser.version||"7.0"==jQuery.browser.version||"8.0"==jQuery.browser.version){var r=document.createElement('<iframe id="'+a+'" name="'+a+'" />');"boolean"==typeof t?r.src="javascript:false":"string"==typeof t&&(r.src=t)}return n+=" />",jQuery(n).appendTo(document.body),jQuery("#"+a).get(0)},createUploadForm:function(e,t,a){var n="jUploadForm"+e,r="jUploadFile"+e,o=jQuery('<form  action="" method="POST" name="'+n+'" id="'+n+'" enctype="multipart/form-data"></form>');if(a)for(var i in a)jQuery('<input type="hidden" name="'+i+'" value="'+a[i]+'" />').appendTo(o);var c=jQuery("#"+t),s=jQuery(c).clone();return jQuery(c).attr("id",r),jQuery(c).before(s),jQuery(c).appendTo(o),jQuery(o).css("position","absolute"),jQuery(o).css("top","-1200px"),jQuery(o).css("left","-1200px"),jQuery(o).appendTo("body"),o},ajaxFileUpload:function(e){e=jQuery.extend({},jQuery.ajaxSettings,e);var t=(new Date).getTime(),a=jQuery.createUploadForm(t,e.fileElementId,e.data===void 0?!1:e.data);jQuery.createUploadIframe(t,e.secureuri);var n="jUploadFrame"+t,r="jUploadForm"+t;e.global&&!jQuery.active++&&jQuery.event.trigger("ajaxStart");var o=!1,i={};e.global&&jQuery.event.trigger("ajaxSend",[i,e]);var c=function(t){var a=document.getElementById(n);try{a.contentWindow?(i.responseText=a.contentWindow.document.body?a.contentWindow.document.body.children[0].innerHTML:null,i.responseXML=a.contentWindow.document.XMLDocument?a.contentWindow.document.XMLDocument:a.contentWindow.document):a.contentDocument&&(i.responseText=a.contentDocument.document.body?a.contentDocument.document.body.children[0].innerHTML:null,i.responseXML=a.contentDocument.document.XMLDocument?a.contentDocument.document.XMLDocument:a.contentDocument.document)}catch(r){jQuery.handleError(e,i,null,r)}if(i||"timeout"==t){o=!0;var c;try{if(c="timeout"!=t?"success":"error","error"!=c){var s=jQuery.uploadHttpData(i,e.dataType);e.success&&e.success(s,c),e.global&&jQuery.event.trigger("ajaxSuccess",[i,e])}else jQuery.handleError(e,i,c)}catch(r){c="error",jQuery.handleError(e,i,c,r)}e.global&&jQuery.event.trigger("ajaxComplete",[i,e]),e.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop"),e.complete&&e.complete(i,c),jQuery(a).unbind(),setTimeout(function(){try{}catch(t){jQuery.handleError(e,i,null,t)}},100),i=null}};e.timeout>0&&setTimeout(function(){o||c("timeout")},e.timeout);try{var a=jQuery("#"+r);jQuery(a).attr("action",e.url),jQuery(a).attr("method","POST"),jQuery(a).attr("target",n),a.encoding?jQuery(a).attr("encoding","multipart/form-data"):jQuery(a).attr("enctype","multipart/form-data"),jQuery(a).submit()}catch(s){jQuery.handleError(e,i,null,s)}return jQuery("#"+n).load(c),{abort:function(){}}},uploadHttpData:function(r,type){var data=!type;return data="xml"==type||data?r.responseXML:r.responseText,"script"==type&&jQuery.globalEval(data),"json"==type&&eval("data = "+data),"html"==type&&jQuery("<div>").html(data).evalScripts(),data}});